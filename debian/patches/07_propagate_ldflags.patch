Description: Properly propagate LDFLAGS in libraries.
 Debian fills up LDFLAGS with hardening flgs but for some libraries this
 parameter is not read from the environment variable but hardcoded.
Author: David Mart√≠nez Moreno <ender@debian.org>
Forwarded: no
Last-Update: 2013-12-18

--- a/mk/gcc.mk
+++ b/mk/gcc.mk
@@ -26,7 +26,7 @@
 LDFLAGS_LIB=-dynamiclib
 LDFLAGS_SONAME=-Wl,-install_name,${LIBDIR}/
 else
-LDFLAGS_LIB=-shared
+LDFLAGS_LIB=${LDFLAGS} -shared
 #ifneq (${NAME},)
 #LDFLAGS_LIB+=-Wl,-soname,lib${NAME}.${EXT_SO}.${VERSION}
 #endif
--- a/shlr/tcc/Makefile
+++ b/shlr/tcc/Makefile
@@ -3,7 +3,7 @@
 OFILES=libtcc.o tccgen.o tccpp.o
 
 CFLAGS+=-fPIC -Wall
-LDFLAGS=-shared
+LDFLAGS+=-shared
 SOEXT?=dylib
 LIBNAME=libr_tcc.${SOEXT}
 
--- a/libr/util/Makefile
+++ b/libr/util/Makefile
@@ -24,6 +24,6 @@
 endif
 
 LDFLAGS+=${BN_LIBS}
-LDFLAGS=${TH_LIBS}
+LDFLAGS+=${TH_LIBS}
 
 include ../rules.mk
